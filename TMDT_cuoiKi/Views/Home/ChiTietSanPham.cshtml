@{
    ViewData["Title"] = ViewData["Title"];
}

<link rel="stylesheet" href="~/style-phong/Style-xemchitiet.css">
<style>
    .section-title {
        border-bottom: 3px solid #28a745; /* Màu xanh lá */
        padding-bottom: 10px;
        margin-bottom: 20px;
        font-size: 24px;
        font-weight: bold;
        color: #000;
    }

    .unit-label {
        font-size: 16px;
        color: #000;
        margin-bottom: 5px
    }
</style>
    @using TMDT_cuoiKi.Data  <!-- thay bằng namespace chứa ShopHueDaQuaContext -->
@{
    var db = new ShopHueDaQuaContext();
    string id = ViewBag.Id as string;

    // Lấy sản phẩm theo ID
    var sanPham = db.SanPhams.FirstOrDefault(sp => sp.IdsanPham == id);

    // Lấy toàn bộ hình ảnh của sản phẩm
    var danhSachAnh = db.HinhAnhSanPhams
        .Where(h => h.IdsanPham == id)
        .OrderBy(h => h.IdhinhAnh)
        .Select(h => h.HinhAnh)
        .ToList();
}
<div class="content">
    <div class="container">
        <div class="breadcrumb">
            <a href="#">Trang chủ</a> / @sanPham.TenSanPham
            (Vàng)
        </div>

        <div class="product-detail">
            <div class="product-images">
                <div class="main-image-container">
                    <img src="@(danhSachAnh.FirstOrDefault() ?? "images/default-product.jpg")"
                         alt="Rượu Nhất Dạ Dế Vương (Vàng)"
                         class="main-image loaded"
                         id="mainImage">
                </div>
                <div class="loading-overlay" id="loadingOverlay">
                    <div class="loading-spinner"></div>
                </div>
                <div class="thumb-images">
                    @foreach (var anh in danhSachAnh)
                    {
                        <img src="@anh" alt="Thumbnail" class="thumb-image" data-main="@anh" />
                    }
                </div>
            </div>

            <div class="product-info">
                @{
                    decimal giaBan = sanPham.GiaBan ?? 0; // nếu null thì dùng 0
                    decimal giaGoc = Math.Round(giaBan * 1.1M);
                    int phanTramGiam = 10;
                }

                <h1 class="product-title">@sanPham.TenSanPham</h1>
                <div class="product-price">
                    @giaBan.ToString("N0")đ <span style="text-decoration: line-through; color: #999; font-size: 16px; margin-left: 10px;">@giaGoc.ToString("N0")đ</span>
                    <span style="background-color: #ff6600; color: white; padding: 0 5px; font-size: 12px; margin-left: 10px;">-10%</span>
                </div>
                <div class="giaca">
                    <div class="danhgia">4.9 ★</div>
                    <div class="product-code">Số lượng tồn: @sanPham.SoLuongTon</div>

                </div>
                <div class="product-status">
                    <div class="status-item">
                        <i class="fas fa-check-circle"></i>
                        <span>Còn hàng trong kho</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>Đảm bảo chất lượng</span>
                    </div>
                    <div class="status-item">
                        <i class="fas fa-shipping-fast"></i>
                        <span>Miễn phí vận chuyển</span>
                    </div>
                </div>
                <div class="product-description">
                    @sanPham.MoTa
                </div>
                <p class="unit-label"><strong>Đơn vị tính: </strong>@sanPham.DonViTinh</p>
                <p class="unit-label"><strong>Xuất xứ: </strong>@sanPham.XuatXu</p>

                <div class="product-quantity">
                    <div style="margin-bottom: 10px;">Số lượng:</div>
                    <div class="quantity-selector">
                        <div class="quantity-button" id="decrease">-</div>
                        <input type="text" value="1" class="quantity-input" id="quantityInput">
                        <div class="quantity-button" id="increase">+</div>
                    </div>
                </div>

                <div class="buy-button">Mua ngay</div>
                <div class="contact-button">Thêm vào giỏ</div>
            </div>
        </div>

        <div class="description">
            <h2 class="section-title">Mô tả sản phẩm</h2>
            <div class="toc">
                <h3>Mục lục</h3>
                <ol>
                    <li>Rượu Nhất Dạ Dế Vương (Vàng) là gì?</li>
                    <li>Thông tin sản phẩm rượu Nhất Dạ Dế Vương (Vàng)</li>
                    <li>Cách bảo quản rượu Nhất Dạ Dế Vương (Vàng)</li>
                    <li>Rượu Nhất Dạ Dế Vương có tác dụng gì vậy?</li>
                    <li>Uống rượu Nhất Dạ Dế Vương có ai cấy không?</li>
                    <li>Công dụng rượu Nhất Dạ Dế Vương (Vàng)</li>
                    <li>Mua rượu Nhất Dạ Dế Vương (Vàng) ở đâu uy tín, chất lượng?</li>
                    <li>Các mặt hàng khác</li>
                    <li>Ai nên đến shop rượu Nhất Dạ Dế Vương từ Hedequa?</li>
                </ol>
            </div>
            <div class="product-description">

                <h2>Rượu Nhất Dạ Dế Vương (Vàng) là gì?</h2>
                <ul>
                    <li>Người giới thiệu và sử dụng: <strong>Vua Minh Mạng</strong></li>
                    <li>Thành phần chính: <strong>Dế vàng</strong></li>
                    <li>
                        Nồng độ cồn: <strong>40-45 độ</strong>, tăng theo thời gian ủ và tùy theo công nghệ sản xuất, có thể
                        lên
                        đến 50 độ
                    </li>
                </ul>

                <p>
                    Rượu Nhất Dạ Dế Vương (Vàng) là một dòng rượu ngâm đặc trưng đến từ vùng phương Đông, được chứng chỉ
                    riêng
                    phương pháp và cách chế biến dế vàng ngâm rượu trắng. Với hương vị thơ mộng, đậm đà, rượu này thường được
                    sử
                    dụng như một loại đồ uống quý, tiếp khách hay tạo món lẩu, nấu các món ăn cung đình. Đặc biệt với các quý
                    ông, đây còn là một loại thức uống bổ dưỡng dành cho nam giới.
                </p>

                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSYHDghnG3UB-efmu5VtfeN03EW3UeHb7BSQ&s" alt="Rượu Nhất Dạ Dế Vương (Vàng)" class="product-image-large">
                <div style="text-align: center; margin-bottom: 20px; font-style: italic;">
                    Các sản phẩm rượu Huế - Rượu nhất
                    dạ
                    dế vương
                </div>

                <p>
                    Rượu được đem ra các nguyên liệu trộn theo tỷ lệ riêng biệt, được truyền miệng từ bao đời nay, mang lại
                    hồi
                    hương đậm đà từ các sản phẩm. Dây là một trong những đặc sản không thể thiếu khi đến Huế. Thậm chí nó được
                    chế biến như một loại thuốc bổ dân gian trong.
                </p>

                <h2>Thông tin sản phẩm rượu Nhất Dạ Dế Vương (Vàng)</h2>

                <table class="product-info-table">
                    <tr>
                        <td>Tên sản phẩm</td>
                        <td>Rượu Nhất Dạ Dế Vương (Vàng)</td>
                    </tr>
                    <tr>
                        <td>Khối lượng</td>
                        <td>500 gram</td>
                    </tr>
                    <tr>
                        <td>Đóng gói</td>
                        <td>Chai thủy tinh cao cấp</td>
                    </tr>
                    <tr>
                        <td>Nồng độ</td>
                        <td>500ml / 40ml</td>
                    </tr>
                    <tr>
                        <td>Hương vị</td>
                        <td>Đặc sắc, đậu đỏ, mật ong ngọt</td>
                    </tr>
                    <tr>
                        <td>Đối tượng sử dụng</td>
                        <td>Người từ 18 tuổi trở lên</td>
                    </tr>
                </table>

                <h2>Uống rượu Nhất Dạ Dế Vương có để say không?</h2>

                <p>
                    Với độ cồn khoảng 40 độ, rượu nhất dạ dế vương là một loại rượu mạnh, nhưng đôi khi người uống không quá
                    say. Tuy nhiên, với công dụ chính của nó, phần lớn mọi người đều sử dụng với lượng nhỏ vào buổi tối.
                </p>

                <h2>Công dụng của rượu Nhất Dạ Dế Vương</h2>

                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSSYHDghnG3UB-efmu5VtfeN03EW3UeHb7BSQ&s" alt="Rượu Nhất Dạ Dế Vương trong hộp quà" class="product-image-large">

                <p>
                    Đã nói đến, tài liệu viếng về thể, phần sinh lý, dinh mác, các loại trị bệnh, tráng dương, bồi bổ, tăng
                    cường sức lực.
                </p>
                <p>Đặc biệt, bạn có thể sử dụng Hedequa với giá không quỹ - Chính hãng từ buồn.</p>
                <p>Gửi ngay một vào lưu xem tại web sản hedequa.vn để xem chi tiết.</p>

                <div class="xem-them">
                    Xem thêm
                </div>
            </div>
        </div>


        <div class="related-products">
            <h2 class="section-title">Sản phẩm tương tự</h2>
            <div class="product-slider">
                @{

                    // Giả định sản phẩm mới là bán chạy nhất – lấy 5 sản phẩm mới nhất
                    var banChayNhat = db.SanPhams
                    .Take(5)
                    .Select(sp => new
                    {
                        SanPham = sp,
                        HinhAnh = db.HinhAnhSanPhams
                    .Where(h => h.IdsanPham == sp.IdsanPham)
                    .OrderBy(h => h.IdhinhAnh)
                    .Select(h => h.HinhAnh)
                    .FirstOrDefault()
                    }).ToList();
                }

                @foreach (var item in banChayNhat)
                {
                    <div class="product-card_2">
                        <div class="product-image_2">
                            <img src="@(item.HinhAnh ?? "images/default-product.jpg")" alt="@item.SanPham.TenSanPham">
                        </div>
                        <h3 class="product-name_2">@item.SanPham.TenSanPham</h3>
                        <div class="product-details_2">
                            <span class="product-price_2">@String.Format("{0:N0}đ", item.SanPham.GiaBan)</span>
                            <span class="product-rating_2">★ 4.5</span> <!-- Giữ mặc định sao -->
                        </div>
                    </div>
                }
            </div>
        </div>
        <h2 class="section-title">Đánh giá và bình luận (3)</h2>

        <div class="review-container">
            <div class="reviews">
                <div class="reviews-summary">
                    <div class="average-rating">4.5</div>
                    <div class="rating-bars">
                        <div class="rating-bar">
                            <div class="rating-label">5★</div>
                            <div class="rating-progress">
                                <div class="rating-progress-fill" style="width: 66%;"></div>
                            </div>
                            <div class="rating-percent">66%</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">4★</div>
                            <div class="rating-progress">
                                <div class="rating-progress-fill" style="width: 33%;"></div>
                            </div>
                            <div class="rating-percent">33%</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">3★</div>
                            <div class="rating-progress">
                                <div class="rating-progress-fill" style="width: 0%;"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">2★</div>
                            <div class="rating-progress">
                                <div class="rating-progress-fill" style="width: 0%;"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                        <div class="rating-bar">
                            <div class="rating-label">1★</div>
                            <div class="rating-progress">
                                <div class="rating-progress-fill" style="width: 0%;"></div>
                            </div>
                            <div class="rating-percent">0%</div>
                        </div>
                    </div>
                </div>
                <h4>Bạn đánh giá sao về sản phẩm này?</h4>
                <div class="buy-button" id="buy-button">
                    Đánh giá ngay
                </div>

            </div>
            <div class="review-section">
                <div class="reviews">
                    <div class="review">
                        <div class="user-info">
                            <img src="avatar1.png" alt="Avatar">
                            <div>
                                <strong>Lâm Phong</strong><br>
                                <small>Tháng 3, 2025</small>
                            </div>
                        </div>
                        <div class="user-rating">⭐ 1.0</div>
                        <p>Thấy cũng bình thường nhưng mà đắt quá cho 1 sao</p>
                        <div class="review-actions">
                            <span>👍 3</span>
                            <span>👎 99</span>
                        </div>
                    </div>

                    <div class="review">
                        <div class="user-info">
                            <img src="avatar2.png" alt="Avatar">
                            <div>
                                <strong>Jimmy Smith</strong><br>
                                <small>Tháng 9 28, 2023</small>
                            </div>
                        </div>
                        <div class="user-rating">⭐ 5.0</div>
                        <p>Tôi đã thử rất nhiều loại rượu, nhưng Nhật Dạ Đế Vương (Vàng) thực sự khiến tôi ấn tượng...</p>
                        <div class="review-actions">
                            <span>👍 8</span>
                            <span>👎 0</span>
                        </div>
                    </div>

                    <div class="review">
                        <div class="user-info">
                            <img src="avatar3.png" alt="Avatar">
                            <div>
                                <strong>Sarah Anderson</strong><br>
                                <small>Tháng 2 20, 2023</small>
                            </div>
                        </div>
                        <div class="user-rating">⭐ 4.0</div>
                        <p>Hương vị của Nhật Dạ Đế Vương (Vàng) rất thơm và êm, hậu vị ngọt nhẹ và dễ chịu...</p>
                        <div class="review-actions">
                            <span>👍 34</span>
                            <span>👎 5</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<script src="~/js/quantity.js"></script>
<script src="~/js/zoom-img.js"></script>
@Html.Partial("_ReviewModal")

<script>
    function toggleTOC() {
           const toc = document.getElementById('tocMenu');
           toc.classList.toggle('collapsed');
       }
</script>